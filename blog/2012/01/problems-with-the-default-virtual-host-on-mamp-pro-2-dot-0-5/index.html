
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Problems with the default virtual host on MAMP Pro 2.0.5 - Lucas' Thoughts</title>
  <meta name="author" content="MuzzleFork">

  
  <meta name="description" content="I&#8217;ve recently upgraded to MAMP Pro and I like how I can easily add virtual hosts in its UI - something I had previously done in code in the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://muzzlefork.github.com/blog/2012/01/problems-with-the-default-virtual-host-on-mamp-pro-2-dot-0-5/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Lucas' Thoughts" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Lucas' Thoughts</a></h1>
  
    <h2>Thoughts on life, etc.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:muzzlefork.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Problems With the Default Virtual Host on MAMP Pro 2.0.5</h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-23T00:00:00+11:00" pubdate data-updated="true">2012-01-23</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>I&#8217;ve recently upgraded to MAMP Pro and I like how I can easily add virtual hosts in its UI - something I had previously done in code in the free version and on older machines running windows, Linux etc. I ran into a strange problem with MAMP though.</p>

<p>In the project I&#8217;m working on, I expect to have the default behaviour for unmatched host names go to the first virtual host (a default behaviour of the apache virtual host system) and to have some custom virtual host configurations for my Zend Framework app to work (namely &#8220;SetEnv APPLICATION_ENV development&#8221;). After pulling my hair out for a while, I found out why my environment variables weren&#8217;t being sent through to apache and PHP when I was getting the default virtual host: MAMP Pro adds an extra first virtual host above your collection of virtual hosts (trying to be helpful, I assume) which doesn&#8217;t have the custom virtual host directory settings in it and as such, requests will fail.<!--more--></p>

<p>To fix it, go to</p>

<p><img src="/images/mamp-edit-conf.png"></p>

<p><a href="http://www.eagleton.org/wp-content/uploads/2012/01/Screen-Shot-2012-01-23-at-10.09.29-PM.png"><img class="alignnone size-full wp-image-206" title="Screen Shot 2012-01-23 at 10.09.29 PM" src="http://www.eagleton.org/wp-content/uploads/2012/01/Screen-Shot-2012-01-23-at-10.09.29-PM.png" alt="" width="546" height="110" /></a></p>

<p>and make the following change:</p>

<script src="https://gist.github.com/3060058.js"> </script>


<p>Of note here are the commented out lines. This port iteration business sets up an empty virtual host at the start of the list which is responsible for handling all failed matches of the following entries - AKA the default virtual host. In my version of the file, this is around line 570, but you should see it about 60 lines before the end of the file.</p>

<p>Then restart apache. You&#8217;ll find in your compiled httpd.conf file (/Library/Application Support/appsolute/MAMP PRO/conf/httpd.conf), you no longer have the extra virtual host definition above the ones you&#8217;ve explicitly defined and the extra settings you&#8217;ve added into the definition for your first virtual host will be passed along correctly to all unmatched web requests.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">MuzzleFork</span></span>

      








  


<time datetime="2012-01-23T00:00:00+11:00" pubdate data-updated="true">2012-01-23</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://muzzlefork.github.com/blog/2012/01/problems-with-the-default-virtual-host-on-mamp-pro-2-dot-0-5/" data-via="MuzzleFork" data-counturl="http://muzzlefork.github.com/blog/2012/01/problems-with-the-default-virtual-host-on-mamp-pro-2-dot-0-5/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2011/07/stop-working-on-shit-code/" title="Previous Post: Stop working on shit code">&laquo; Stop working on shit code</a>
      
      
        <a class="basic-alignment right" href="/blog/2012/01/mysql-performance-on-os-x/" title="Next Post: MySQL Performance on OS X">MySQL Performance on OS X &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/01/mysql-performance-on-os-x/">MySQL Performance on OS X</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/problems-with-the-default-virtual-host-on-mamp-pro-2-dot-0-5/">Problems with the default virtual host on MAMP Pro 2.0.5</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/07/stop-working-on-shit-code/">Stop working on shit code</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/07/os-x-lion-mamp-2-0-1-memcache-and-php-5-2-17/">OS X Lion + MAMP 2.0.1 + Memcache and PHP 5.2.17</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/06/wiki-class/">Wiki Class</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/MuzzleFork">@MuzzleFork</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'MuzzleFork',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("MuzzleFork", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/MuzzleFork" class="twitter-follow-button" data-show-count="false">Follow @MuzzleFork</a>
  
</section>



<section class="googleplus googleplus-hidden">
  <h1>
    <a href="https://plus.google.com/115211849868429156563?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - MuzzleFork -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'muzzleforkblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://muzzlefork.github.com/blog/2012/01/problems-with-the-default-virtual-host-on-mamp-pro-2-dot-0-5/';
        var disqus_url = 'http://muzzlefork.github.com/blog/2012/01/problems-with-the-default-virtual-host-on-mamp-pro-2-dot-0-5/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
